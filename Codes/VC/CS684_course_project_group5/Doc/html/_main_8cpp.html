<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CS684_course_project_group5: Main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>Main.cpp File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &quot;<a class="el" href="includes_8h_source.html">includes.h</a>&quot;</code><br/>

<p><a href="_main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#ac97b8ee753e4405397a42ad5799b0f9e">null</a>&#160;&#160;&#160;'\0'</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#a4de54ec7e937db705fb4c85236c8fdd3">capture_image</a> (char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#a62d038ed3c1e5abed342e0efda9634c7">vectorGeneration</a> (char *, IplImage *, list&lt; <a class="el" href="classpoint.html">point</a> &gt;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#aa60174029c7b7433ab5d57987611e0e4">sample</a> (char *, IplImage *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#aacd29bb3b4818090616c01a558e13add">show_vector_image</a> (list&lt; <a class="el" href="classpoint.html">point</a> &gt;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#a404439f0d9f2c125995deecd26bf22d9">show_vector_image</a> (list&lt; <a class="el" href="classpoint.html">point</a> &gt; path, char *imgfile, IplImage *img1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">list&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#a00ef12e51e9dc321e5e1c4aef786a1a5">moveToNextEnd</a> (list&lt; double &gt; moves, <a class="el" href="classpoint.html">point</a> prev_endCur, <a class="el" href="classpoint.html">point</a> endCur, <a class="el" href="classpoint.html">point</a> startNext, <a class="el" href="classpoint.html">point</a> next_startNext)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac97b8ee753e4405397a42ad5799b0f9e"></a><!-- doxytag: member="Main.cpp::null" ref="ac97b8ee753e4405397a42ad5799b0f9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define null&#160;&#160;&#160;'\0'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00002">2</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4de54ec7e937db705fb4c85236c8fdd3"></a><!-- doxytag: member="Main.cpp::capture_image" ref="a4de54ec7e937db705fb4c85236c8fdd3" args="(char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void capture_image </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>filemane</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Capture image from webcam </p>

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00054">54</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
        IplImage* frame = 0;            
        <span class="comment">//CV_CAP_ANY</span>
        CvCapture* capture = cvCaptureFromCAM( 1 );   
        <span class="keywordflow">if</span>( !capture ) 
        {     
                fprintf( stderr, <span class="stringliteral">&quot;ERROR: capture is NULL \n&quot;</span> );     
                <span class="keywordflow">return</span>;   
        }    
        <span class="comment">// Create a window in which the captured images will be presented   </span>
        cvNamedWindow( <span class="stringliteral">&quot;mywindow&quot;</span>, CV_WINDOW_AUTOSIZE );    
        <span class="comment">// Show the image captured from the camera in the window and repeat   </span>
        <span class="keywordflow">while</span>( 1 ) 
        {     
                <span class="comment">// Get one frame     </span>
                frame = cvQueryFrame( capture );     
                <span class="keywordflow">if</span>( !frame ) 
                {       
                        fprintf( stderr, <span class="stringliteral">&quot;ERROR: frame is null...\n&quot;</span> );
                        <span class="keywordflow">return</span>;
                }      
                cvShowImage( <span class="stringliteral">&quot;mywindow&quot;</span>, frame );                               
                <span class="comment">// Do not release the frame     </span>
                <span class="comment">//If ESC key pressed, Key=0x10001B under OpenCV 0.9.7(linux version),     </span>
                <span class="comment">//remove higher bits using AND operator     </span>
                <span class="keywordflow">if</span>( (cvWaitKey(10) &amp; 255) == 27 ) 
                {
                        <span class="keywordflow">break</span>;   
                }
        }    
        <span class="comment">// Show the image frame.</span>
        cvShowImage( <span class="stringliteral">&quot;mywindow&quot;</span>, frame );
        cvWaitKey(0);
        <span class="comment">// Save the image in specified filename</span>
        <span class="keywordflow">if</span>(!cvSaveImage(filemane,frame)) printf(<span class="stringliteral">&quot;Could not save: %s\n&quot;</span>,filemane);
        <span class="comment">// Release the capture device and window</span>
        cvReleaseCapture( &amp;capture );
        cvDestroyWindow( <span class="stringliteral">&quot;mywindow&quot;</span> ); 
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a><!-- doxytag: member="Main.cpp::main" ref="ae66f6b31b5ad750f1fe042a706a4e3d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00309">309</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
        IplImage* img=0;
        <span class="keywordtype">char</span>* filename = <span class="stringliteral">&quot;face2.jpg&quot;</span>;
        <a class="code" href="_main_8cpp.html#a4de54ec7e937db705fb4c85236c8fdd3">capture_image</a>(filename);
        <a class="code" href="_main_8cpp.html#aa60174029c7b7433ab5d57987611e0e4">sample</a>(filename,img);

        getchar();
        <span class="keywordflow">return</span> 0;
}</pre></div>
</div>
</div>
<a class="anchor" id="a00ef12e51e9dc321e5e1c4aef786a1a5"></a><!-- doxytag: member="Main.cpp::moveToNextEnd" ref="a00ef12e51e9dc321e5e1c4aef786a1a5" args="(list&lt; double &gt; moves, point prev_endCur, point endCur, point startNext, point next_startNext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list&lt;double&gt; moveToNextEnd </td>
          <td>(</td>
          <td class="paramtype">list&lt; double &gt;&#160;</td>
          <td class="paramname"> <em>moves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classpoint.html">point</a>&#160;</td>
          <td class="paramname"> <em>prev_endCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classpoint.html">point</a>&#160;</td>
          <td class="paramname"> <em>endCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classpoint.html">point</a>&#160;</td>
          <td class="paramname"> <em>startNext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classpoint.html">point</a>&#160;</td>
          <td class="paramname"> <em>next_startNext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Moves the BOT to the next end point </p>

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00100">100</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                                      {

        <span class="keywordtype">double</span> angle1,angle2,angle3;
        angle1=endCur.<a class="code" href="classpoint.html#aac62db6bc3e2f7d35950ffa8789fde18">angleBetweenPoints</a>(prev_endCur);
        angle2=startNext.<a class="code" href="classpoint.html#aac62db6bc3e2f7d35950ffa8789fde18">angleBetweenPoints</a>(endCur);
        angle3=next_startNext.<a class="code" href="classpoint.html#aac62db6bc3e2f7d35950ffa8789fde18">angleBetweenPoints</a>(startNext);

        <span class="keywordtype">double</span> dif_angle=angle2-angle3;
        <span class="keywordflow">if</span>(dif_angle&gt;180)
                dif_angle-=360;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dif_angle&lt;-180)
                dif_angle+=360;
        
        <span class="keywordflow">if</span>(((angle3/10)*(angle2/10))&lt;0)
                dif_angle=-dif_angle;

        <span class="keywordtype">int</span> <a class="code" href="vector__extract_8h.html#a0bf987e9977ab76c2bb626ca0f1bede1">TURN</a> = (dif_angle) &lt; 0 ? 0 : 1;

        <span class="comment">//push in reverse order</span>
        moves.push_front(TURN);
        moves.push_front(fabs(dif_angle));

        dif_angle=angle1-angle2;
        <span class="keywordflow">if</span>(dif_angle&gt;180)
                dif_angle-=360;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dif_angle&lt;-180)
                dif_angle+=360;

        <span class="keywordflow">if</span>(((angle1/10)*(angle2/10))&lt;0)
                dif_angle=-dif_angle;

        TURN = (dif_angle) &lt; 0 ? 0 : 1;
        <span class="keywordtype">double</span> distance=endCur.<a class="code" href="classpoint.html#aa1af528ca96a10e9d3a3e6b1af7112ee">distance</a>(startNext);

        moves.push_front(distance);

        moves.push_front(2);
        moves.push_front(0);
        moves.push_front(0);

        moves.push_front(TURN);
        moves.push_front(fabs(dif_angle));

        <span class="keywordflow">return</span> moves;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa60174029c7b7433ab5d57987611e0e4"></a><!-- doxytag: member="Main.cpp::sample" ref="aa60174029c7b7433ab5d57987611e0e4" args="(char *, IplImage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sample </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>imgfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>img</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Apply median filter to smooth</p>
<p>Red boundary detection make all pixles which are outside the red boundary white.</p>
<p>Thresholding according to grey scale</p>
<p>Thinning the thresholded image</p>
<p>Generate vectors and do further processing</p>
</p>

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00234">234</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  IplImage* img = 0; </span>
  <span class="keywordtype">int</span> height,width,step,channels;
  <span class="keywordtype">char</span> *data;
  <span class="keywordtype">int</span> i;

  <span class="comment">// load an image  </span>
  img=cvLoadImage(imgfile);
  <span class="keywordflow">if</span>(!img)
  {
    printf(<span class="stringliteral">&quot;Could not load image file: %s\n&quot;</span>,imgfile);
    exit(0);
  }

  <span class="comment">// get the image data</span>
  height    = img-&gt;height;
  width     = img-&gt;width;
  step      = img-&gt;widthStep;
  channels  = img-&gt;nChannels;
  data      = img-&gt;imageData;

  <span class="comment">//defining global variables </span>
  <a class="code" href="vector__extract_8h.html#a16611451551e3d15916bae723c3f59f7">h</a>=height;
  <a class="code" href="vector__extract_8h.html#aac374e320caaadeca4874add33b62af2">w</a>=width;

  printf(<span class="stringliteral">&quot;Processing a %dx%d image with %d channels\n&quot;</span>,height,width,channels); 
  cout&lt;&lt;<span class="stringliteral">&quot;\n\n height &quot;</span>&lt;&lt;height&lt;&lt;<span class="stringliteral">&quot;\nwidth &quot;</span>&lt;&lt;width&lt;&lt;<span class="stringliteral">&quot;\nwidthStep &quot;</span>&lt;&lt;step&lt;&lt;<span class="stringliteral">&quot;\nChannel &quot;</span>&lt;&lt;channels;

  <span class="comment">// create a window</span>
  cvNamedWindow(<span class="stringliteral">&quot;mainWin&quot;</span>, CV_WINDOW_AUTOSIZE); 
  cvMoveWindow(<span class="stringliteral">&quot;mainWin&quot;</span>, 100, 100);

  <a class="code" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a>=<span class="keyword">new</span> <span class="keywordtype">char</span>*[height+1];
        <span class="keywordflow">for</span>(i=0;i&lt;height+1;i++)
                <a class="code" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a>[i]=<span class="keyword">new</span> <span class="keywordtype">char</span>[width+1];

  cvSmooth(img,img,CV_MEDIAN);<span class="comment">// display (&quot;mainWinSmooth&quot;,img);</span>
  
  <a class="code" href="operations_8h.html#a46ba61313a62305e1ee2a6ccfcc0190c">BoundaryDetection</a>(img,140,60,60);

  <a class="code" href="operations_8h.html#a4c55f58a39a34b26c44d954b7390fe1a">Thresholding</a>(img,100);<span class="comment">//   display (&quot;mainWinThes&quot;, img );</span>

  <a class="code" href="operations_8h.html#a054c3e82fa39265684b69e272e5dc830">Thinning</a>(img,<a class="code" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a>);<span class="comment">// </span>
  <a class="code" href="operations_8h.html#a635cd1f9842f6b23d2573166f06a589c">display</a>(<span class="stringliteral">&quot;mainWinThinned&quot;</span>, img );


  list&lt;point&gt; endPoints = <a class="code" href="vector__extract_8h.html#aad93ba4710ade791418ffe0dc686baac">StartPoints</a>(img,<a class="code" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a>);

  <a class="code" href="_main_8cpp.html#a62d038ed3c1e5abed342e0efda9634c7">vectorGeneration</a>(imgfile, img, endPoints);

  <span class="comment">//release all resouces that were taken</span>
  cvReleaseImage(&amp;img );
}
</pre></div>
</div>
</div>
<a class="anchor" id="aacd29bb3b4818090616c01a558e13add"></a><!-- doxytag: member="Main.cpp::show_vector_image" ref="aacd29bb3b4818090616c01a558e13add" args="(list&lt; point &gt;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_vector_image </td>
          <td>(</td>
          <td class="paramtype">list&lt; <a class="el" href="classpoint.html">point</a> &gt;&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a404439f0d9f2c125995deecd26bf22d9"></a><!-- doxytag: member="Main.cpp::show_vector_image" ref="a404439f0d9f2c125995deecd26bf22d9" args="(list&lt; point &gt; path, char *imgfile, IplImage *img1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_vector_image </td>
          <td>(</td>
          <td class="paramtype">list&lt; <a class="el" href="classpoint.html">point</a> &gt;&#160;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>imgfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>img1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Show the vector image drawm </p>

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00019">19</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

        cout &lt;&lt; <span class="stringliteral">&quot;Showing vector image\n&quot;</span>;
        IplImage* img=cvLoadImage(imgfile);
        
        <span class="keywordflow">if</span> (img==0)
        {
                cout &lt;&lt; <span class="stringliteral">&quot;Can not open output file to show extracted vector image\n&quot;</span>;
                <span class="keywordflow">return</span>;
        }

        list&lt;point&gt;::iterator it = path.begin();
        <a class="code" href="classpoint.html">point</a> prev_point = (*it);
        it++;
        <span class="keywordflow">for</span> (;it!=path.end();it++)
        {
                cvLine(img, cvPoint((*it).get_Y(),(*it).get_X()), cvPoint(prev_point.<a class="code" href="classpoint.html#aa8d43ec6f46ac2ab3251bf188df582d9">get_Y</a>(),prev_point.<a class="code" href="classpoint.html#a3d31b560b17fcf65bea36469e49a6fb4">get_X</a>()), cvScalar(0,255,0), 4);
                cvCircle (img,cvPoint((*it).get_Y(),(*it).get_X()),1,cvScalar (255,0,0),2);
                cvCircle (img,cvPoint(prev_point.<a class="code" href="classpoint.html#aa8d43ec6f46ac2ab3251bf188df582d9">get_Y</a>(),prev_point.<a class="code" href="classpoint.html#a3d31b560b17fcf65bea36469e49a6fb4">get_X</a>()),1,cvScalar (255,0,0),2);

                cvLine(img1, cvPoint((*it).get_Y(),(*it).get_X()), cvPoint(prev_point.<a class="code" href="classpoint.html#aa8d43ec6f46ac2ab3251bf188df582d9">get_Y</a>(),prev_point.<a class="code" href="classpoint.html#a3d31b560b17fcf65bea36469e49a6fb4">get_X</a>()), cvScalar(0,255,0), 4);
                cvCircle (img1,cvPoint((*it).get_Y(),(*it).get_X()),1,cvScalar (255,0,0),2);
                cvCircle (img1,cvPoint(prev_point.<a class="code" href="classpoint.html#aa8d43ec6f46ac2ab3251bf188df582d9">get_Y</a>(),prev_point.<a class="code" href="classpoint.html#a3d31b560b17fcf65bea36469e49a6fb4">get_X</a>()),1,cvScalar (255,0,0),2);

                prev_point = *it;
        }
        <span class="comment">//display(&quot;mainWin&quot;, img );</span>
        <a class="code" href="operations_8h.html#a635cd1f9842f6b23d2573166f06a589c">display</a>(<span class="stringliteral">&quot;mainWin2&quot;</span>, img1 );
        cvReleaseImage(&amp;img );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a62d038ed3c1e5abed342e0efda9634c7"></a><!-- doxytag: member="Main.cpp::vectorGeneration" ref="a62d038ed3c1e5abed342e0efda9634c7" args="(char *, IplImage *, list&lt; point &gt;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vectorGeneration </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&lt; <a class="el" href="classpoint.html">point</a> &gt;&#160;</td>
          <td class="paramname"> <em>endPoints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generates vectors from the image </p>

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00149">149</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                           {
        list&lt;point&gt; path;
        list&lt;point&gt; refined_path;
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size=endPoints.size();
        list&lt;double&gt; whole_moves;
        <a class="code" href="classpoint.html">point</a> lastPoint=<a class="code" href="classpoint.html">point</a>(-1,-1);
        <a class="code" href="classpoint.html">point</a> lastlastPoint,frontNext;

        <span class="keywordflow">while</span>(endPoints.empty()==<span class="keyword">false</span>)
        {


                <a class="code" href="classpoint.html">point</a> start_point=endPoints.front();
                endPoints.pop_front();
                path = <a class="code" href="vector__extract_8h.html#a9dd7ffba175a0f077970f21491961148">traverse_black_line</a>(<a class="code" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a>,start_point);
                endPoints.remove (path.back());
                
                <span class="keywordflow">if</span>(path.size()==1)
                        <span class="keywordflow">continue</span>;


                refined_path = <a class="code" href="vector__extract_8h.html#a95fb0633c7621b0578fbaaae27c7937b">appriximate_straight_line</a>(path,8);
                <span class="comment">//cout &lt;&lt; &quot;\n\n\n 2nd refine \n\n&quot;;</span>
                refined_path = <a class="code" href="vector__extract_8h.html#a95fb0633c7621b0578fbaaae27c7937b">appriximate_straight_line</a>(refined_path,1);
                <span class="comment">//create_refined_file (refined_path);</span>
                <span class="keywordflow">if</span> (refined_path.size()&lt;=1)
                        <span class="keywordflow">continue</span>;

                <a class="code" href="_main_8cpp.html#aacd29bb3b4818090616c01a558e13add">show_vector_image</a>(refined_path,filename,img);
                size=endPoints.size();
                <span class="comment">//cout&lt;&lt;&quot; \n\n\n Size of list&quot;&lt;&lt;size;</span>
                list&lt;double&gt; moves=<a class="code" href="vector__extract_8h.html#ac0516c1899db400fb0b0556ac60da454">find_direction_vector</a>(refined_path);

                frontNext=refined_path.front();
                refined_path.pop_front();
                refined_path.push_front(frontNext);

                <span class="keywordflow">if</span>(lastPoint.<a class="code" href="classpoint.html#a3d31b560b17fcf65bea36469e49a6fb4">get_X</a>()!=-1)
                        moves=<a class="code" href="_main_8cpp.html#a00ef12e51e9dc321e5e1c4aef786a1a5">moveToNextEnd</a>(moves, lastlastPoint, lastPoint, frontNext, refined_path.front());

                lastPoint=<a class="code" href="classpoint.html">point</a>(refined_path.back());

                refined_path.pop_back();
                lastlastPoint=refined_path.back();

                <span class="keywordflow">if</span>(moves.size()==0)
                        <span class="keywordflow">continue</span>;


                list&lt;double&gt;::iterator it;
                it=moves.begin();

                <span class="keywordtype">int</span> i;
                <span class="keywordflow">for</span>(i=0;it!=moves.end();it++,i++)
                {
                        whole_moves.push_back ((<span class="keywordtype">int</span>)(*it));
                }
                
        }

                <span class="keywordtype">int</span> *moves_int=<span class="keyword">new</span> <span class="keywordtype">int</span>[whole_moves.size()];

                list&lt;double&gt;::iterator it;
                it=whole_moves.begin();

                <span class="keywordtype">int</span> i;
                <span class="keywordflow">for</span>(i=0;it!=whole_moves.end();it++,i++)
                {
                        moves_int[i]=(int)(*it);
                        cout&lt;&lt;<span class="stringliteral">&quot;\n &quot;</span>;
                        <span class="keywordflow">if</span> (i%3==0)
                                cout &lt;&lt; <span class="stringliteral">&quot;DIST &quot;</span>;
                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i%3==1)
                                cout &lt;&lt;<span class="stringliteral">&quot;ANGLE &quot;</span>;
                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i%3==2)
                                cout &lt;&lt;<span class="stringliteral">&quot;DIRECTION &quot;</span>;
                        cout&lt;&lt;moves_int[i];
                }
                
                whole_moves.push_back(0);
                whole_moves.push_back(2);
                <a class="code" href="serialcomm_8h.html#a840cf0edf5194046c2014606b615c7c7">writeOnBot</a>(moves_int,whole_moves.size());

}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ae67d5856930eb5f4a234a9c0f117666f"></a><!-- doxytag: member="Main.cpp::mat" ref="ae67d5856930eb5f4a234a9c0f117666f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** <a class="el" href="_main_8cpp.html#ae67d5856930eb5f4a234a9c0f117666f">mat</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Global variable to maintain the image matrix </p>

<p>Definition at line <a class="el" href="_main_8cpp_source.html#l00008">8</a> of file <a class="el" href="_main_8cpp_source.html">Main.cpp</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Nov 8 2010 04:17:51 for CS684_course_project_group5 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
